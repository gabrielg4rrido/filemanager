<div class="container">
  <h2>Mini sistema de arquivos virtuais ESSIA</h2>

  <div class="card-container">
    <mat-card *ngFor="let dir of diretorios" class="card fixed-size-card">
      <mat-card-title>
        <div *ngIf="editandoDiretorio && editandoDiretorio.id === dir.id">
          <input [(ngModel)]="editandoDiretorio.nome" class="form-input" />
          <button mat-raised-button color="primary" (click)="salvarNomeDiretorio()">Salvar</button>
          <button mat-raised-button color="warn" (click)="cancelarEdicaoDiretorio()">Cancelar</button>
        </div>
        <div *ngIf="!editandoDiretorio || editandoDiretorio.id !== dir.id">
          {{ dir.nome }}
        </div>
      </mat-card-title>
      <mat-card-actions class="card-actions">
        <button mat-raised-button color="primary" (click)="navegarParaSubdiretorio(dir.id)">Abrir</button>
        <button mat-raised-button color="accent" (click)="editarNomeDiretorio(dir)">Editar</button>
        <button mat-raised-button color="warn" (click)="confirmarExclusaoDiretorio(dir.id)">Excluir</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div *ngIf="diretorioAtualId" class="arquivos-container">
    <div class="card-container">
      <mat-card *ngFor="let arquivo of arquivos" class="card fixed-size-card">
        <mat-card-title>
          <div *ngIf="editandoArquivo && editandoArquivo.id === arquivo.id">
            <input [(ngModel)]="editandoArquivo.nome" class="form-input" />
            <button mat-raised-button color="primary" (click)="salvarNomeArquivo()">Salvar</button>
            <button mat-raised-button color="warn" (click)="cancelarEdicaoArquivo()">Cancelar</button>
          </div>
          <div *ngIf="!editandoArquivo || editandoArquivo.id !== arquivo.id">
            {{ arquivo.nome }}.{{ arquivo.extensao }}
          </div>
        </mat-card-title>
        <mat-card-actions class="card-actions">
          <button mat-raised-button color="accent" (click)="editarNomeArquivo(arquivo)">Editar</button>
          <button mat-raised-button color="warn" (click)="confirmarExclusaoArquivo(arquivo.id)">Excluir</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <div class="form-container-wrapper">
    <div class="form-container create-directory-form">
      <input id="novoDiretorioNome" [(ngModel)]="novoDiretorio.nome" placeholder="Nome do novo diretório" class="form-input">
      <button mat-raised-button (click)="criarDiretorio()">Criar Diretório</button>
    </div>

    <div *ngIf="diretorioAtualId" class="form-container">
      <input id="novoArquivoNome" [(ngModel)]="novoArquivo.nome" placeholder="Nome do novo arquivo" class="form-input">
      <input id="novoArquivoExtensao" [(ngModel)]="novoArquivo.extensao" placeholder="Extensão do novo arquivo" class="form-input">
      <button mat-raised-button (click)="criarArquivo()">Criar Arquivo</button>
    </div>
  </div>

  <button *ngIf="diretorioAtualId" mat-raised-button color="primary" class="voltar-button" (click)="voltar()">Voltar</button>
</div>
